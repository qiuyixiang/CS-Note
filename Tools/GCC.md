

# Options

## Warning


| Options | Usage                                              |
| ------- | -------------------------------------------------- |
| -Wall   | Enable all Warning Message                         |
| -Werror | Force the compiler treat the warning as error      |
| -Wextra | Add some extra warning which not included by -Wall |
|         |                                                    |


## Debug

| Options | Usage                                                 |
| ------- | ----------------------------------------------------- |
| -g      | Enable Debugger information generated by the compiler |
| -ggdb   | Produce debugging information for GDB                 |
| -g0     | Produces no debug information                         |
| -g1     | Produces minimal information                          |
| -g2     | The default level                                     |
| -g3     | Include extra information about macros                |


## Optimization

| Options | Usage                     |
| ------- | ------------------------- |
| -O0     | Without Optimization      |
| -O1     | Optimization with level 1 |
| -O2     | Optimization with level 2 |
| -O3     | Optimization with level 3 |
| -Os     | Optimize for code size    |

## Preprocessor

Directory Search Order
1. For the quote form of the include directive, the directory of the current file is searched first.
2. For the quote form of the include directive, the directories specified by -iquote options are searched.
3. Directories specified with -I options are scanned.
4. Directories specified with -isystem options are scanned.
5. Standard system directories are scanned.
6. Directories specified with -idirafter options are scanned.

| Options        | Usage                                                                            |
| -------------- | -------------------------------------------------------------------------------- |
| -I dir         | Add the directory dir to the list of directories to be searched for header files |
| -iquote dir    | Add the directory dir to the list of directories to be searched for header files |
| -isystem dir   | Add the directory dir to the list of directories to be searched for header files |
| -idirafter dir | Add the directory dir to the list of directories to be searched for header files |
| -nostdinc      | Do not search the standard system directories for header files                   |
| -nostdinc++    | Do not search for header files in the C++-specific standard directories          |


## Linker


# Extension
This section introduce some GNU GCC extension features for C and C++.

## Inline Assembly

The Template of inline assembly in GNU GCC is 
```c
asm volatile( assembler template
    : output operands                   (optional)
    : input operands                    (optional)
    : clobbered registers list          (optional)
    );
```

Variable Binding:
- %0 must be the first output variable.
- %1 - %9 can be either the rest output variables or the input variables.

Below is the table for the general format binding of variables

| Format  | Meaning                   | Range           |
| ------- | ------------------------- | --------------- |
| "r"(x)  | Input variable            | Input Operands  |
| "=r"(x) | Output variable           | Output Operands |
| "+r"(x) | Input and output variable | Output Operands |

Here is a table of GNU inline assembly registers constraints.

| Constraint | Meaning                                                    |
| ---------- | ---------------------------------------------------------- |
| a          | %eax                                                       |
| b          | %ebx                                                       |
| c          | %ecx                                                       |
| d          | %edx                                                       |
| S          | %esi                                                       |
| D          | %edi                                                       |
| r          | Any general purpose registers                              |
| q          | %eax, %ebx, %ecx, %edx                                     |
| m          | Memory                                                     |
| i          | Immediate number                                           |
| X          | Any operands (include immediate number, memory, registers) |
| g          | Memory or registers                                        |

In GCC 3.1 We can use a more readable way to bind variables
```c
int add(int EAX, int EBX){
	int result;
	asm volatile("movl %[input1], %[result] \n\t"
	"addl %[input2], %[result]"
	: [result] "=r" (result)
	: [input1] "r" (EAX), [input2] "r" (EBX));
	
	return result;
}
```

Explanation of the syntax:
- [variable] : create a variable name which can be same as the C variable.
- [variable] "=r" (variable) :  bind the variable in assembly to the actual C variable.

These labels are in a namespace of their own, and will not collide with any C identifiers. The same can be done for input operands, too.